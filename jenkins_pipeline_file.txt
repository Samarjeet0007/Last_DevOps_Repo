pipeline {
	agent any
	stages {
		stage('compilation:') {
			steps {
				bat 'nuget restore WebAppDotNet.sln'  
				bat "\"${tool 'MSBuild_On_Local'}\" WebAppDotNet.sln"
			}
		}
	//	stage('testing:') {
	//		steps {
	//			bat '"C:\\Users\\samarjeetkumar\\NUnit.ConsoleRunner.3.10.0\\tools\\nunit3-console.exe"' 
	//		}
	//	}
		stage('code_quality:') {
			def sqScannerMsBuildHome = tool 'Scanner for MSBuild 4.6'
			steps {
				withSonarQubeEnv('sonarqube') {
					bat "${sqScannerMsBuildHome}\\SonarQube.Scanner.MSBuild.exe begin /k:myKey"
                                        bat 'MSBuild.exe /t:Rebuild'
                                        bat "${sqScannerMsBuildHome}\\SonarQube.Scanner.MSBuild.exe end"
				}
			}
		}
	}
}
